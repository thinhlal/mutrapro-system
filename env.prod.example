# ============================================
# MuTraPro Production Environment Variables
# ============================================
# Copy file này thành .env và điền các giá trị thực tế
# KHÔNG commit file .env vào Git!

# ============================================
# Database Configuration (Railway)
# ============================================
# Mỗi service có database riêng trên Railway
# Lấy connection string từ Railway dashboard

# API Gateway Database
GATEWAY_DATASOURCE_URL=jdbc:postgresql://containers-us-west-xxx.railway.app:5432/railway
GATEWAY_DATASOURCE_USERNAME=postgres
GATEWAY_DATASOURCE_PASSWORD=your_gateway_db_password

# Identity Service Database
IDENTITY_DATASOURCE_URL=jdbc:postgresql://containers-us-west-yyy.railway.app:5432/railway
IDENTITY_DATASOURCE_USERNAME=postgres
IDENTITY_DATASOURCE_PASSWORD=your_identity_db_password

# Project Service Database
PROJECT_DATASOURCE_URL=jdbc:postgresql://containers-us-west-zzz.railway.app:5432/railway
PROJECT_DATASOURCE_USERNAME=postgres
PROJECT_DATASOURCE_PASSWORD=your_project_db_password

# Billing Service Database
BILLING_DATASOURCE_URL=jdbc:postgresql://containers-us-west-aaa.railway.app:5432/railway
BILLING_DATASOURCE_USERNAME=postgres
BILLING_DATASOURCE_PASSWORD=your_billing_db_password

# Request Service Database
REQUEST_DATASOURCE_URL=jdbc:postgresql://containers-us-west-bbb.railway.app:5432/railway
REQUEST_DATASOURCE_USERNAME=postgres
REQUEST_DATASOURCE_PASSWORD=your_request_db_password

# Notification Service Database
NOTIFICATION_DATASOURCE_URL=jdbc:postgresql://containers-us-west-ccc.railway.app:5432/railway
NOTIFICATION_DATASOURCE_USERNAME=postgres
NOTIFICATION_DATASOURCE_PASSWORD=your_notification_db_password

# Specialist Service Database
SPECIALIST_DATASOURCE_URL=jdbc:postgresql://containers-us-west-ddd.railway.app:5432/railway
SPECIALIST_DATASOURCE_USERNAME=postgres
SPECIALIST_DATASOURCE_PASSWORD=your_specialist_db_password

# Studio Service Database
STUDIO_DATASOURCE_URL=jdbc:postgresql://containers-us-west-eee.railway.app:5432/railway
STUDIO_DATASOURCE_USERNAME=postgres
STUDIO_DATASOURCE_PASSWORD=your_studio_db_password

# Chat Service Database
CHAT_DATASOURCE_URL=jdbc:postgresql://containers-us-west-fff.railway.app:5432/railway
CHAT_DATASOURCE_USERNAME=postgres
CHAT_DATASOURCE_PASSWORD=your_chat_db_password

# ============================================
# Redis Configuration (Redis Cloud)
# ============================================
# Lấy từ Redis Cloud dashboard
# Format: redis://default:password@host:port
# Extract thành:
REDIS_HOST=redis-12345.c123.us-east-1-1.ec2.cloud.redislabs.com
REDIS_PORT=12345
REDIS_PASSWORD=your_redis_cloud_password

# ============================================
# Kafka Configuration
# ============================================
# Nếu dùng local Kafka container (Redpanda):
KAFKA_BOOTSTRAP_SERVERS=kafka:9092

# Nếu dùng managed Kafka (AWS MSK, Confluent Cloud, Upstash):
# KAFKA_BOOTSTRAP_SERVERS=your-kafka-host:9092
# KAFKA_SECURITY_PROTOCOL=SASL_SSL
# KAFKA_SASL_MECHANISM=PLAIN
# KAFKA_SASL_JAAS_CONFIG=org.apache.kafka.common.security.plain.PlainLoginModule required username='your_username' password='your_password';

# ============================================
# JWT Configuration
# ============================================
# Generate strong secret: openssl rand -base64 32
JWT_SECRET=your_super_secret_jwt_key_here_minimum_32_characters
JWT_EXPIRES_IN=7d

# ============================================
# AWS S3 Configuration
# ============================================
# Cho Project Service và Request Service (file storage)
AWS_S3_BUCKET_NAME=mutrapro-prod-files
AWS_S3_REGION=ap-southeast-1
AWS_REGION=ap-southeast-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_ENABLED=true

# ============================================
# Mail Configuration (Notification Service)
# ============================================
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_password
MAIL_FROM_NAME=MuTraPro
FRONTEND_URL=https://your-domain.com

# ============================================
# OAuth Configuration (Identity Service - Optional)
# ============================================
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=https://your-domain.com/auth/google/callback

# ============================================
# Application URLs
# ============================================
API_BASE_URL=http://your-ec2-ip-or-domain
REACT_APP_API_URL=http://your-ec2-ip-or-domain

# ============================================
# CORS Configuration
# ============================================
CORS_ORIGIN=http://your-ec2-ip-or-domain,https://your-domain.com

# ============================================
# Server Configuration (Optional - có defaults)
# ============================================
# Các biến này có default values trong application-prod.yml
# Chỉ cần set nếu muốn override default

# API Gateway
# SERVER_PORT=8080
# SERVER_CONTEXT_PATH=

# Identity Service
# SERVER_PORT=8081
# SERVER_CONTEXT_PATH=

# Project Service
# SERVER_PORT=8082
# SERVER_CONTEXT_PATH=

# Billing Service
# SERVER_PORT=8083
# SERVER_CONTEXT_PATH=

# Request Service
# SERVER_PORT=8084
# SERVER_CONTEXT_PATH=

# Notification Service
# SERVER_PORT=8085
# SERVER_CONTEXT_PATH=

# Specialist Service
# SERVER_PORT=8086
# SERVER_CONTEXT_PATH=

# Studio Service
# SERVER_PORT=8087
# SERVER_CONTEXT_PATH=

# Chat Service
# SERVER_PORT=8088
# SERVER_CONTEXT_PATH=

# ============================================
# Service URLs (Optional - có defaults)
# ============================================
# Các service URLs dùng để inter-service communication
# Default: http://service-name:port

# REQUEST_SERVICE_URL=http://request-service:8084
# CHAT_SERVICE_URL=http://chat-service:8088
# BILLING_SERVICE_URL=http://billing-service:8083
# NOTIFICATION_SERVICE_URL=http://notification-service:8085
# SPECIALIST_SERVICE_URL=http://specialist-service:8086
# PROJECT_SERVICE_BASE_URL=http://project-service:8082
# IDENTITY_SERVICE_BASE_URL=http://identity-service:8081
# NOTIFICATION_SERVICE_BASE_URL=http://notification-service:8085

# ============================================
# Kafka Consumer Group IDs (Optional - có defaults)
# ============================================
# KAFKA_CONSUMER_GROUP_ID=project-service-file-consumer
# KAFKA_CONSUMER_GROUP_ID=billing-service

# ============================================
# Kafka Topic Names (Optional - có defaults)
# ============================================
# Có thể override topic names nếu cần customize
# Project Service Topics:
# KAFKA_TOPIC_FILE_UPLOADED=file-uploaded
# KAFKA_TOPIC_CONTRACT_OTP_EMAIL=contract-otp-email
# KAFKA_TOPIC_CONTRACT_SIGNED=contract-events
# KAFKA_TOPIC_CONTRACT_SIGNED_EMAIL=contract-signed-email
# KAFKA_TOPIC_BILLING_DEPOSIT_PAID=billing-deposit-paid
# KAFKA_TOPIC_BILLING_MILESTONE_PAID=billing-milestone-paid
# KAFKA_TOPIC_BILLING_REVISION_FEE_PAID=billing-revision-fee-paid
# KAFKA_TOPIC_TASK_ASSIGNMENT_ASSIGNED=task-assignment-assigned
# KAFKA_TOPIC_TASK_ASSIGNMENT_READY_TO_START=task-assignment-ready-to-start
# KAFKA_TOPIC_TASK_ASSIGNMENT_CANCELED=task-assignment-canceled
# KAFKA_TOPIC_TASK_ISSUE_REPORTED=task-issue-reported
# KAFKA_TOPIC_CONTRACT_NOTIFICATION=contract-notification
# KAFKA_TOPIC_SUBMISSION_DELIVERED=submission-delivered
# KAFKA_TOPIC_REVISION_REQUESTED=revision-requested
# KAFKA_TOPIC_REVISION_DELIVERED=revision-delivered
# KAFKA_TOPIC_REVISION_SUBMITTED=revision-submitted
# KAFKA_TOPIC_REVISION_APPROVED=revision-approved
# KAFKA_TOPIC_REVISION_REJECTED=revision-rejected
# KAFKA_TOPIC_MILESTONE_PAID_NOTIFICATION=milestone-paid-notification
# KAFKA_TOPIC_MILESTONE_READY_FOR_PAYMENT_NOTIFICATION=milestone-ready-for-payment-notification
# KAFKA_TOPIC_BILLING_REVISION_FEE_REFUNDED=billing-revision-fee-refunded
# KAFKA_TOPIC_CHAT_SYSTEM_MESSAGE=chat-system-message-events
# KAFKA_TOPIC_REQUEST_ASSIGNED=request-events
# KAFKA_TOPIC_CHAT_ROOM_CREATED=chat-events

# ============================================
# E-Signature OTP Configuration (Project Service - Optional)
# ============================================
# ESIGN_OTP_EXPIRATION_MINUTES=5
# ESIGN_OTP_MAX_ATTEMPTS=3
# ESIGN_OTP_LENGTH=6

# ============================================
# JWT Configuration (Chat Service - Optional)
# ============================================
# JWT_VALID_DURATION=3600
# JWT_REFRESHABLE_DURATION=86400

# ============================================
# Outbox Configuration (Chat Service - Optional)
# ============================================
# OUTBOX_MAX_RETRIES=3

# ============================================
# Notes
# ============================================
# 1. Tất cả passwords phải mạnh và unique
# 2. Không commit file .env vào Git
# 3. Backup file .env ở nơi an toàn
# 4. Rotate secrets định kỳ
# 5. Các biến có default values (commented out) không bắt buộc
#    nhưng có thể uncomment và sửa nếu muốn override default
# 6. Lợi ích của việc list tất cả biến (kể cả optional):
#    - Dễ dàng customize: chỉ cần uncomment và sửa .env
#    - Không cần sửa code/application-prod.yml
#    - Tránh lỗi nếu thiếu biến (mặc dù có default)
#    - Documentation rõ ràng về tất cả config options

